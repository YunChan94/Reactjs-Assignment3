{"version":3,"file":"static/js/679.ef6e4de1.chunk.js","mappings":"6MACA,GAAgB,UAAY,8BAA8B,MAAQ,0BAA0B,KAAO,yBAAyB,UAAY,8BAA8B,YAAc,gCAAgC,aAAe,iCAAiC,YAAc,iC,SCiIlR,EA5HmB,WACjB,IAAMA,GAAWC,EAAAA,EAAAA,MACXC,GAAUC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,MAAMH,OAAvB,IAC5B,GAAoCI,EAAAA,EAAAA,WAAS,GAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KAGMC,GAAcC,EAAAA,EAAAA,UAGpB,GAA8BJ,EAAAA,EAAAA,UAAS,MAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAA0CN,EAAAA,EAAAA,UAAS,IAAnD,eAAOO,EAAP,KAAsBC,EAAtB,KAGQC,GADOC,EAAAA,EAAAA,MACPD,WAERE,EAAAA,EAAAA,YAAU,WACRC,MACE,wJAECC,MAAK,SAACC,GAAD,OAAcA,EAASC,MAAvB,IACLF,MAAK,SAACG,GACL,IAAMC,EAAeD,EAAKE,MACxB,SAACb,GAAD,OAAaA,EAAQc,IAAIC,OAASX,CAAlC,IAEFH,EAAWW,GAGX,IAAMI,EAAqBL,EAAKM,QAC9B,SAACC,GAAD,OACEA,EAAKC,WAAaP,EAAaO,UAC/BD,EAAKJ,IAAIC,OAASX,CAFpB,IAIFD,EAAiBa,EAClB,GACJ,GAAE,IA6BH,OACE,yBACGhB,IACC,iBAAKoB,UAAWC,EAAAA,UAAhB,WACE,gBAAKD,UAAWC,EAAAA,MAAhB,UACE,gBAAKC,IAAKtB,EAAQuB,KAAMC,IAAI,QAE9B,iBAAKJ,UAAWC,EAAAA,KAAhB,WACE,wBAAKrB,EAAQyB,QACb,iCAAOzB,EAAQ0B,MAAMC,QACnB,wBACA,KAFF,WAIA,uBAAI3B,EAAQ4B,cACZ,cAAGC,MAAO,CAAEC,MAAO,QAASC,WAAY,UAAxC,wBACA,uBAAI/B,EAAQmB,YACZ,gBAAKC,UAAWC,EAAAA,UAAhB,UACE,kBAAMW,SA5CW,SAACC,GAG5B,GAFAA,EAAMC,kBAEU,IAAZ3C,EAAJ,CAKA,IAAM4C,EAAgBrC,EAAYsC,QAAQC,MAG1ChD,EACEiD,EAAAA,EAAAA,QAAoB,CAAEpB,KAAMlB,EAASuC,OAAQC,OAAOL,MAItD9C,EAASiD,EAAAA,EAAAA,cAGTG,MAAM,oCAbL,MAFCA,MAAM,2CAgBT,EAwBW,WACE,kBACEC,KAAK,SACLC,YAAY,WACZC,KAAK,IACLC,IAAI,IACJC,IAAKhD,EACLiD,UAAQ,KAEV,mBAAQ3B,UAAWC,EAAAA,OAAnB,kCAIN,iBAAKD,UAAWC,EAAAA,YAAhB,WACE,mBAAQ2B,QAnCQ,WACxBnD,GAAeD,EAChB,EAiCS,yBACCA,IACC,6BACE,iDACA,uBAAII,EAAQiD,mBAIlB,4BACE,4CACC/C,IACC,gBAAKkB,UAAWC,EAAAA,aAAhB,SACGnB,EAAcgD,KAAI,SAAChC,GAAD,OACjB,iBAAKE,UAAWC,EAAAA,YAAqB8B,GAAIjC,EAAKJ,IAAIC,KAAlD,WACE,gBAAKO,IAAKJ,EAAKK,KAAMC,IAAI,GAAG2B,GAAIjC,EAAKJ,IAAIC,QACzC,wBAAKG,EAAKO,QACV,iCAAOP,EAAKQ,MAAMC,QAChB,wBACA,KAFF,YAJe,aAiBlC,C","sources":["webpack://rjs-asm03/./src/pages/Detail/DetailPage.module.css?0e36","pages/Detail/DetailPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DetailPage_container__aw-JM\",\"image\":\"DetailPage_image__hOv5n\",\"decs\":\"DetailPage_decs__PnJOQ\",\"inputForm\":\"DetailPage_inputForm__8k9U4\",\"description\":\"DetailPage_description__DW-Ob\",\"productsList\":\"DetailPage_productsList__ss41L\",\"productItem\":\"DetailPage_productItem__YukYN\"};","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { cartActions } from \"../../store/cart\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport classes from \"./DetailPage.module.css\";\r\nconst DetailPage = () => {\r\n  const dispatch = useDispatch();\r\n  const isLogin = useSelector((state) => state.login.isLogin);\r\n  const [isShowDesc, setIsShowDesc] = useState(false);\r\n\r\n  // Lấy dữ liệu số lượng item add vào cart\r\n  const quanlityRef = useRef();\r\n\r\n  // Lấy dữ liệu từ server\r\n  const [product, setProduct] = useState(null);\r\n  const [relateProduct, setRelateProduct] = useState([]);\r\n  //Lấy id sản phẩm\r\n  const params = useParams(); //a ktr xem nó có cập nhật váo state k a?\r\n  const { productId } = params;\r\n\r\n  useEffect(() => {\r\n    fetch(\r\n      \"https://firebasestorage.googleapis.com/v0/b/funix-subtitle.appspot.com/o/Boutique_products.json?alt=media&token=dc67a5ea-e3e0-479e-9eaf-5e01bcd09c74\"\r\n    )\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        const productFound = data.find(\r\n          (product) => product._id.$oid === productId\r\n        );\r\n        setProduct(productFound);\r\n\r\n        // Tìm sản phẩm có cùng category\r\n        const relateProductFound = data.filter(\r\n          (item) =>\r\n            item.category === productFound.category &&\r\n            item._id.$oid !== productId\r\n        );\r\n        setRelateProduct(relateProductFound);\r\n      });\r\n  }, []);\r\n\r\n  const addItemToCartHandler = (event) => {\r\n    event.preventDefault();\r\n    // Yêu cầu đăng nhập mới thêm vào giỏ hàng\r\n    if (isLogin === false) {\r\n      alert(\"Please login for adding product to Cart!\");\r\n      return;\r\n    }\r\n\r\n    const productAmount = quanlityRef.current.value;\r\n\r\n    // Thêm vào giỏ hàng\r\n    dispatch(\r\n      cartActions.addCart({ item: product, amount: Number(productAmount) })\r\n    );\r\n\r\n    // Cập nhật dữ liệu\r\n    dispatch(cartActions.updateCart());\r\n\r\n    //Thông báo đã bỏ sản phẩm vào giỏ hàng thành công\r\n    alert(\"The product is added to your cart\");\r\n  };\r\n\r\n  // Ẩn hiện decription\r\n  const toggleDescription = () => {\r\n    setIsShowDesc(!isShowDesc);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {product && (\r\n        <div className={classes.container}>\r\n          <div className={classes.image}>\r\n            <img src={product.img1} alt=\"\" />\r\n          </div>\r\n          <div className={classes.decs}>\r\n            <h2>{product.name}</h2>\r\n            <p>{`${product.price.replace(\r\n              /\\B(?=(\\d{3})+(?!\\d))/g,\r\n              \",\"\r\n            )} VND`}</p>\r\n            <p>{product.short_desc}</p>\r\n            <p style={{ color: \"black\", fontWeight: \"bolder\" }}>CATEGORY:</p>\r\n            <p>{product.category}</p>\r\n            <div className={classes.inputForm}>\r\n              <form onSubmit={addItemToCartHandler}>\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"QUANTITY\"\r\n                  step=\"1\"\r\n                  min=\"1\"\r\n                  ref={quanlityRef}\r\n                  required\r\n                />\r\n                <button className={classes.addBtn}>Add to Cart</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          <div className={classes.description}>\r\n            <button onClick={toggleDescription}>DESCRIPTION</button>\r\n            {isShowDesc && (\r\n              <span>\r\n                <h3>PRODUCT DESCRIPTION</h3>\r\n                <p>{product.long_desc}</p>\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div>\r\n            <h3>RELATE PRODUCTS</h3>\r\n            {relateProduct && (\r\n              <div className={classes.productsList}>\r\n                {relateProduct.map((item) => (\r\n                  <div className={classes.productItem} id={item._id.$oid}>\r\n                    <img src={item.img1} alt=\"\" id={item._id.$oid} />\r\n                    <h5>{item.name}</h5>\r\n                    <p>{`${item.price.replace(\r\n                      /\\B(?=(\\d{3})+(?!\\d))/g,\r\n                      \",\"\r\n                    )} VND`}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default DetailPage;\r\n"],"names":["dispatch","useDispatch","isLogin","useSelector","state","login","useState","isShowDesc","setIsShowDesc","quanlityRef","useRef","product","setProduct","relateProduct","setRelateProduct","productId","useParams","useEffect","fetch","then","response","json","data","productFound","find","_id","$oid","relateProductFound","filter","item","category","className","classes","src","img1","alt","name","price","replace","short_desc","style","color","fontWeight","onSubmit","event","preventDefault","productAmount","current","value","cartActions","amount","Number","alert","type","placeholder","step","min","ref","required","onClick","long_desc","map","id"],"sourceRoot":""}